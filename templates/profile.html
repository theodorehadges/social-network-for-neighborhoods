{% extends "layout.html" %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block content %}
{% from "_formhelpers.html" import render_field %}
<h1>{{ userprofile[0] }} {{userprofile[1] }}</h1>
<h3>Bio</h3>
<p>{{ userprofile[2] }}</p>
<div id = friendlist">

  
<ul>

<h4>Friends</h4>
{% for friend in friends %}
<li id={{ friend[0] }} lat={{ friend[4] }} lon={{ friend[5] }}>{{ friend[2] }}
  {{ friend[3] }}</li>
{% endfor %}
</ul>
</div>
<style type="text/css">
     #map {
        width: 50%;
        height: 500px;
      }
    </style>
    <div id="map"></div>
    <script>


      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 40.7126588, lng: -74.0141567},
          zoom: 12
        });
        /*
        $('friend-list').each(function(i) {
          $(this).attr('lat');
          console.info($(this).attr('lat'));


        })
        */
        var marker = new google.maps.Marker({
              position: {lat: 40.7126588, lng: -74.0141567},
              title:"Elaine's House"
        });
        marker.setMap(map);
        google.maps.event.addListener(map,'click',function(event) {
        console.info(event.latLng.lat());  // print lat of click pos
        console.info(event.latLng.lng());  // print lng of click pos

        const friend_array = Array.from(document.querySelectorAll('#friendlist>ul>li'));
        console.log("Get first: ", friend_array[0].textContent);

        /*
        console.log("Iterate with for...of:");
        for (const li of document.querySelectorAll('#friendlist>ul>li')) {
              console.log(li.textContent);
        }
        */

    });
      }

    
    </script>
  <script>var marker = new google.maps.Marker({
              position: {lat: 40.7126588, lng: -74.0141567},
              title:"Elaine's House"
        });
        marker.setMap(map);
  </script>

    <script
         src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZ9FKI0IjDZJJK5vEyDb_Temr3QyZLfVs&callback=initMap"
             async defer></script>

{% endblock %}
